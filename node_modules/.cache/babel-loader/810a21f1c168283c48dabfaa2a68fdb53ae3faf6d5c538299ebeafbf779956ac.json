{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Krishang Darji\\\\OneDrive\\\\Desktop\\\\Mudravani1\\\\src\\\\components\\\\meet.jsx\",\n  _s = $RefreshSig$();\n// src/components/VideoConference.jsx\nimport React, { useEffect, useRef, useState } from 'react';\nimport io from 'socket.io-client';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst VideoConference = () => {\n  _s();\n  const [stream, setStream] = useState(null);\n  const [peerConnections, setPeerConnections] = useState([]);\n  const localVideoRef = useRef(null);\n  const [socket, setSocket] = useState(null);\n  useEffect(() => {\n    // Initialize socket.io connection to backend\n    const socketIo = io('http://localhost:5000');\n    setSocket(socketIo);\n\n    // Initialize user's webcam and display\n    navigator.mediaDevices.getUserMedia({\n      video: true,\n      audio: true\n    }).then(stream => {\n      setStream(stream);\n      localVideoRef.current.srcObject = stream;\n    }).catch(error => console.error('Error getting media: ', error));\n    return () => {\n      if (socketIo) {\n        socketIo.disconnect();\n      }\n    };\n  }, []);\n  useEffect(() => {\n    if (!socket) return;\n    socket.on('offer', handleOffer);\n    socket.on('answer', handleAnswer);\n    socket.on('ice-candidate', handleICECandidate);\n  }, [socket]);\n  const handleOffer = offer => {\n    const peerConnection = new RTCPeerConnection();\n    peerConnection.setRemoteDescription(new RTCSessionDescription(offer));\n    peerConnection.addEventListener('icecandidate', handleICECandidateEvent);\n    peerConnection.addEventListener('track', handleTrackEvent);\n\n    // Add local stream to the peer connection\n    stream.getTracks().forEach(track => {\n      peerConnection.addTrack(track, stream);\n    });\n    peerConnection.createAnswer().then(answer => {\n      peerConnection.setLocalDescription(answer);\n      socket.emit('answer', answer);\n    }).catch(error => console.error('Error creating answer: ', error));\n    setPeerConnections(prev => [...prev, peerConnection]);\n  };\n  const handleAnswer = answer => {\n    const peerConnection = peerConnections[peerConnections.length - 1];\n    peerConnection.setRemoteDescription(new RTCSessionDescription(answer));\n  };\n  const handleICECandidateEvent = event => {\n    if (event.candidate) {\n      socket.emit('ice-candidate', event.candidate);\n    }\n  };\n  const handleICECandidate = candidate => {\n    const peerConnection = peerConnections[peerConnections.length - 1];\n    peerConnection.addIceCandidate(new RTCIceCandidate(candidate));\n  };\n  const handleTrackEvent = event => {\n    const remoteVideo = document.createElement('video');\n    remoteVideo.srcObject = event.streams[0];\n    remoteVideo.autoplay = true;\n    document.getElementById('remote-videos').appendChild(remoteVideo);\n  };\n  const createRoom = () => {\n    socket.emit('create-room');\n  };\n  const joinRoom = roomId => {\n    socket.emit('join-room', roomId);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Video Conference\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"video-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"video\", {\n        ref: localVideoRef,\n        autoPlay: true,\n        muted: true,\n        style: {\n          width: '300px',\n          border: '2px solid black'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"remote-videos\",\n        style: {\n          display: 'flex'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: createRoom,\n      children: \"Create Room\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => joinRoom('roomId'),\n      children: \"Join Room\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 5\n  }, this);\n};\n_s(VideoConference, \"c50sAayX3kCH/7pxEk89ESrCKsE=\");\n_c = VideoConference;\nexport default VideoConference;\nvar _c;\n$RefreshReg$(_c, \"VideoConference\");","map":{"version":3,"names":["React","useEffect","useRef","useState","io","jsxDEV","_jsxDEV","VideoConference","_s","stream","setStream","peerConnections","setPeerConnections","localVideoRef","socket","setSocket","socketIo","navigator","mediaDevices","getUserMedia","video","audio","then","current","srcObject","catch","error","console","disconnect","on","handleOffer","handleAnswer","handleICECandidate","offer","peerConnection","RTCPeerConnection","setRemoteDescription","RTCSessionDescription","addEventListener","handleICECandidateEvent","handleTrackEvent","getTracks","forEach","track","addTrack","createAnswer","answer","setLocalDescription","emit","prev","length","event","candidate","addIceCandidate","RTCIceCandidate","remoteVideo","document","createElement","streams","autoplay","getElementById","appendChild","createRoom","joinRoom","roomId","children","fileName","_jsxFileName","lineNumber","columnNumber","className","ref","autoPlay","muted","style","width","border","id","display","onClick","_c","$RefreshReg$"],"sources":["C:/Users/Krishang Darji/OneDrive/Desktop/Mudravani1/src/components/meet.jsx"],"sourcesContent":["// src/components/VideoConference.jsx\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport io from 'socket.io-client';\r\n\r\nconst VideoConference = () => {\r\n  const [stream, setStream] = useState(null);\r\n  const [peerConnections, setPeerConnections] = useState([]);\r\n  const localVideoRef = useRef(null);\r\n  const [socket, setSocket] = useState(null);\r\n\r\n  useEffect(() => {\r\n    // Initialize socket.io connection to backend\r\n    const socketIo = io('http://localhost:5000');\r\n    setSocket(socketIo);\r\n\r\n    // Initialize user's webcam and display\r\n    navigator.mediaDevices\r\n      .getUserMedia({ video: true, audio: true })\r\n      .then((stream) => {\r\n        setStream(stream);\r\n        localVideoRef.current.srcObject = stream;\r\n      })\r\n      .catch((error) => console.error('Error getting media: ', error));\r\n\r\n    return () => {\r\n      if (socketIo) {\r\n        socketIo.disconnect();\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!socket) return;\r\n\r\n    socket.on('offer', handleOffer);\r\n    socket.on('answer', handleAnswer);\r\n    socket.on('ice-candidate', handleICECandidate);\r\n  }, [socket]);\r\n\r\n  const handleOffer = (offer) => {\r\n    const peerConnection = new RTCPeerConnection();\r\n    peerConnection.setRemoteDescription(new RTCSessionDescription(offer));\r\n    peerConnection.addEventListener('icecandidate', handleICECandidateEvent);\r\n    peerConnection.addEventListener('track', handleTrackEvent);\r\n\r\n    // Add local stream to the peer connection\r\n    stream.getTracks().forEach((track) => {\r\n      peerConnection.addTrack(track, stream);\r\n    });\r\n\r\n    peerConnection\r\n      .createAnswer()\r\n      .then((answer) => {\r\n        peerConnection.setLocalDescription(answer);\r\n        socket.emit('answer', answer);\r\n      })\r\n      .catch((error) => console.error('Error creating answer: ', error));\r\n\r\n    setPeerConnections((prev) => [...prev, peerConnection]);\r\n  };\r\n\r\n  const handleAnswer = (answer) => {\r\n    const peerConnection = peerConnections[peerConnections.length - 1];\r\n    peerConnection.setRemoteDescription(new RTCSessionDescription(answer));\r\n  };\r\n\r\n  const handleICECandidateEvent = (event) => {\r\n    if (event.candidate) {\r\n      socket.emit('ice-candidate', event.candidate);\r\n    }\r\n  };\r\n\r\n  const handleICECandidate = (candidate) => {\r\n    const peerConnection = peerConnections[peerConnections.length - 1];\r\n    peerConnection.addIceCandidate(new RTCIceCandidate(candidate));\r\n  };\r\n\r\n  const handleTrackEvent = (event) => {\r\n    const remoteVideo = document.createElement('video');\r\n    remoteVideo.srcObject = event.streams[0];\r\n    remoteVideo.autoplay = true;\r\n    document.getElementById('remote-videos').appendChild(remoteVideo);\r\n  };\r\n\r\n  const createRoom = () => {\r\n    socket.emit('create-room');\r\n  };\r\n\r\n  const joinRoom = (roomId) => {\r\n    socket.emit('join-room', roomId);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>Video Conference</h1>\r\n      <div className=\"video-container\">\r\n        <video\r\n          ref={localVideoRef}\r\n          autoPlay\r\n          muted\r\n          style={{ width: '300px', border: '2px solid black' }}\r\n        />\r\n        <div id=\"remote-videos\" style={{ display: 'flex' }} />\r\n      </div>\r\n      <button onClick={createRoom}>Create Room</button>\r\n      <button onClick={() => joinRoom('roomId')}>Join Room</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VideoConference;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}